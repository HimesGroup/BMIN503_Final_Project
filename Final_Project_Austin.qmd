---
title: "Your_Title"
subtitle: "BMIN503/EPID600 Final Project"
author: "First_Name Last_Name"
format: html
editor: visual
number-sections: true
embed-resources: true
---

------------------------------------------------------------------------

Use this template to complete your project throughout the course. Your Final Project presentation will be based on the contents of this document. Replace the title/name above and text below with your own, but keep the headers. Feel free to change the theme and other display settings, although this is not required.

## Overview {#sec-overview}

**Give a brief a description of your project and its goal(s), what data you are using to complete it, and what two faculty/staff in different fields you have spoken to about your project with a brief summary of what you learned from each person. Include a link to your final project GitHub repository.**

Castleman disease is a rare disease that can be deadly. Right now, only one FDA-approved drug exists to treat the most deadly form of CD. The best way to gain more knowledge and find other treatments for this disease is through the implementation of a rare disease registry. This project aims to characterize the first several hundred patients in the ACCELERATE natural history registry to find opportunities for further patient enrollment so that this important research can continue.

## Introduction {#sec-introduction}

**Describe the problem addressed, its significance, and some background to motivate the problem. This should extend what is in the @sec-overview.**

**Explain why your problem is interdisciplinary, what fields can contribute to its understanding, and incorporate background related to what you learned from meeting with faculty/staff.**

Castleman disease is a rare disease characterized by lymph node enlargement, specific microscopic changes to the lymph nodes, and a broad range of symptoms and laboratory findings. Castleman disease patients can belong in one of two groups: unicentric Castleman disease (UCD) or multicentric Castleman disease (MCD). UCD is typically localized and easily treated via lymph node excision. However, MCD is a systemic condition associated with heterogeneous symptoms. MCD, being the more severe of the subtypes, is currently very poorly understood. It is thought that MCD patients have a 5-year overall survival rate between 50% and 65%. There is currently only one FDA-approved drug for the treatment of idiopathic MCD, the most aggressive type of MCD . Unfortunately, there has not been much of an effort historically to collaborate on Castleman disease research. However, more recently, the Castleman Disease Collaborative Network (CDCN) has made strides in the research due to the implementation of a biobank and a medical record registry. In 2013 the CDCN initiated a medical record registry to promote the study of Castleman disease. This registry, called ACCELERATE (Advancing Castleman Care with an Electronic Longitudinal Registry, E-Repository, and Treatment/Effectiveness research) collects real-world demographic, clinical, laboratory, and outcomes data on patients with Castleman disease. Currently, the registry has around 700 patients who have partially or fully completed the enrollment process.

Due to the nature of rare disease research, it is important to be able to collect and store patient information for as many patients as possible. That way, researchers can compare disease manifestation across age, sex, race, and more. When collecting both medical records and biospecimens in a rare disease, there is a need to collect, track, and monitor information in an systematic fashion. Especially in a research laboratory, where specimen and patient data not only be manipulated to make discoveries regarding patient treatment but may also change over time. The need to join information using biobank databases, the ACCELERATE data set, and other resources makes this an interdisciplinary problem. My main goal of this project is to further understand the population enrolled in the ACCELERATE registry and find ways to increase engagement. From meeting with my mentor, I found that one interest of our research team is to explore gaps in enrollment and errors in the enrollment process. First, I will describe enrollees in the registry to discover gaps and opportunities in patient engagement to further enrollment. To characterize the Castleman disease population in ACCELERATE, clinical and demographic characteristics will be summarized for all patients enrolled in the registry. I will use an interactive map to illustrate the locations of the patients enrolled in the US and other countries. Then I will use enrollment data to take a deep dive into engagement, by finding information like the average length of symptom onset to time of diagnosis (to tell us more about how our diagnostic criteria have affected the population), date of diagnosis on different forms (to check for patient understanding/gaps in patient engagement), date of diagnosis to date of enrollment in registry (to tell us more about patient engagement). This information can be crucial in showingus how patients interact with the registry and can help to find barriers in enrollment.

## Methods {#sec-methods}

**Describe the data used and general methodological approach used to address the problem described in the @sec-introduction. Subsequently, incorporate full R code necessary to retrieve and clean data, and perform analysis. Be sure to include a description of code so that others (including your future self) can understand what you are doing and why.**

Any information about names of patients removed.

```{r}
#libraries

library(readr)
library(gtsummary)
library(tidyverse)
library(lubridate)
library(dplyr)
library(lubridate)
library(ggplot2)

```

```{r}
#read in registry documents. All downloaded on 11.7.23.

demographic <- read.csv("Y:/BMIN 503/Data Final Project/DemographicForm.csv")
diagnosis <- read.csv("Y:/BMIN 503/Data Final Project/DiagnosisForm.csv")
eligibility<- read.csv("Y:/BMIN 503/Data Final Project/DiagnosisForm.csv")
hospital<- read.csv("Y:/BMIN 503/Data Final Project/Hospital.csv")
QoL<-read.csv("Y:/BMIN 503/Data Final Project/QualityOfLife.csv")
```

```{r}
#cleaning the demographic form for what we are interested in.

demographic <- rename(demographic,  
                 sex = sex_of_participant, 
                 dob = participant_date_of_birth_guid, 
                 race = race_of_participant, 
                 country=country_of_birth_guid,
                 ) |>
  mutate(sex = factor(sex, levels = c(1, 2, 3, 4),
                      labels = c("male", "female", "Other", "Transsexual"))) |>
  mutate(race = factor(race, levels = c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17  ,18), 
                         labels = c("AmericanIndianOrAlaskanNative", "Asian Indian", "Chinese", "Filipino", "Japanese", "Korean","Vietnamese", "Other Asian", "Black or Afrian American", "Native Hawaiian", "Guamanian", "Chamorro", "Samoan", "Other Pacific Islander", "White", "Other", "Unknown", "Refuse to answer"))) 
  
```

```{r}
#start with some descriptive statistics

demographic|>
  tbl_summary()

#We have 674 patients who filled out this form. 

demographic|>
  select(c(sex, country))|>
  tbl_summary()

#59% of enrollees are female and 73% of enrollees are from the USA.

#calculate current age of these patients.

now=Sys.Date()
now

demographic$dob<-as.Date(demographic$dob, format="%m/%d/%Y")

demographic<-
  mutate(demographic, today=now)

demographic<-
  mutate(demographic, age=as.numeric(today-demographic$dob)/365)

#median current age of patients is 47 yeras old.
```

```{r}
#combine diagnosis and demographic. goal is to calculate age at diagnosis using diagnosis date from diagnosis form and age from demographic form.

#converting dates into actual date format.
diagnosis$date_at_diagnosis<-as.Date(diagnosis$date_at_diagnosis, format="%m/%d/%Y")

diagnosis$date_symptoms_began<-as.Date(diagnosis$date_symptoms_began, format="%m/%d/%Y")
#joining the two dataframes.
demographic.with.diagnosis <- inner_join(demographic, diagnosis, by="patient_id")

#new column- age at diagnosis
demographic.with.diagnosis<-
  mutate(demographic.with.diagnosis, age.at.diagnosis=as.numeric(demographic.with.diagnosis$date_at_diagnosis-demographic.with.diagnosis$dob)/365)

#graph age at diagnosis
ggplot(demographic.with.diagnosis, aes(x = age.at.diagnosis)) +
    geom_histogram(binwidth = 4)

#median age at diagnosis. still working on this
median(as.numeric(demographic.with.diagnosis, demographic.with.diagnosis$age.at.diagnosis), na.rm = T)

demographic.with.diagnosis|>
  tbl_summary()
#median age at diagnosis is 39 years old.
```

```{r}
#chart age of participants
ggplot(data=demographic, aes(x=sex))+
  geom_bar()
```

```{r}
ggplot(data=demographic, aes(x=race))+
  geom_bar()
```

Analyses to include:

-   interactive map/charts

    -   by diagnosis, by year, national vs. international, by month/season, canada? japan?

-   US vs. world

    -   death rate, diagnosis rate, when diagnosed, medications, age distribution, how many hospitalizations?, commodities, prevalence

-   enrollment data

    -   by finding information like the average length of symptom onset to time of diagnosis (to tell us more about how our diagnostic criteria have affected the population)

    -   date of diagnosis on different forms (to check for patient understanding/gaps in patient engagement)

    -   date of diagnosis to date of enrollment in registry (to tell us more about patient engagement)

## Results {#sec-results}

**Describe your results and include relevant tables, plots, and code/comments used to obtain them. You may refer to the @sec-methods as needed. End with a brief conclusion of your findings related to the question you set out to address. You can include references if you'd like, but this is not required.**

## Conclusion

This is my conclusion.
