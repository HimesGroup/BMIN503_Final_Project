---
title: "Final_Project_Extras"
author: "Nawar Naseer"
date: "11/16/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Description
I am using this document to store extra code chunks that yielded in results/maps/graphs that I didn't think were useful for the final report, but wanted to maintain a copy of in case I changed my mind. Where possible, I indicate why I didn't think it was helpful to include. 

Create a map of change in percent population with low access to stores from 2010 to 2015. 
```{r, eval=TRUE}
#Create new dataframe with variables of interest
LA2015change <- Access %>%
  select(FIPS, PCH_LACCESS_POP_10_15)
LA2015change$GEO_ID <- paste0("0500000US", LA2015change$FIPS)
LA2015changemap <- inner_join(counties, LA2015change, by="GEO_ID")

myPalette <- colorRampPalette(brewer.pal(9, "YlOrRd"))

my_theme <- function() {
  theme_minimal() +                                  
  theme(axis.line = element_blank(),                 
        axis.text = element_blank(),                 
        axis.title = element_blank(),
        panel.grid = element_line(color = "white"),  
        legend.key.size = unit(0.8, "cm"),          
        legend.text = element_text(size = 16),       
        legend.title = element_text(size = 16),
        plot.title = element_text(size = 22))      
}

ggplot() +
  geom_sf(data = LA2015changemap) + 
  geom_sf(data = LA2015changemap, aes(fill = PCH_LACCESS_POP_10_15), lwd = 0) +
  my_theme() +
  ggtitle("County-Level Percent Change in Population with Low Access to Stores in the US 2010-2015") +
  scale_fill_gradientn(name = "Percent Change in Population", colours = myPalette(100))
```

Create a map of percent change in population that had low access to stores and low income between 2010 and 2015.
```{r, eval=TRUE}
#Create new dataframe with variables of interest
LAIchange <- Access %>%
  select(FIPS, PCH_LACCESS_LOWI_10_15)
LAIchange$GEO_ID <- paste0("0500000US", LAIchange$FIPS)
LAIchangemap <- inner_join(counties, LAIchange, by="GEO_ID")

myPalette <- colorRampPalette(brewer.pal(9, "YlOrRd"))

my_theme <- function() {
  theme_minimal() +                                  
  theme(axis.line = element_blank(),                 
        axis.text = element_blank(),                 
        axis.title = element_blank(),
        panel.grid = element_line(color = "white"),  
        legend.key.size = unit(0.8, "cm"),          
        legend.text = element_text(size = 16),       
        legend.title = element_text(size = 16),
        plot.title = element_text(size = 22))      
}

ggplot() +
  geom_sf(data = LAIchangemap) + 
  geom_sf(data = LAIchangemap, aes(fill = PCH_LACCESS_LOWI_10_15), lwd = 0) +
  my_theme() +
  ggtitle("County-Level Percent Population with Low Income and Low Access to Stores in the US in 2015") +
  scale_fill_gradientn(name = "Percent Population", colours = myPalette(100))
```
Visually not as helpful since there were a few outlier counties with large changes, whereas most places had relatively little change.

```{r, eval=TRUE}
#Transposing the dataframe to make the bar graphing easier
Access_age_PHLBAL_t <- data.frame(t(Access_age_PHLBAL))
Access_age_PHLBAL_t %>%
  rename(Baltimore = X1, Philadelphia = X2)

AAAt <- Access_age_PHLBAL_t[-c(1),] 
```
Ended up doing this manually.

```{r, eval=TRUE}
#Create new dataframe with variables of interest
SNAP2016 <- Stores %>%
  select(FIPS, SNAPSPTH16)
SNAP2016$GEO_ID <- paste0("0500000US", SNAP2016$FIPS)
SNAP2016map <- inner_join(counties, SNAP2016, by="GEO_ID")

ggplot() +
  geom_sf(data = SNAP2016map) + 
  geom_sf(data = SNAP2016map, aes(fill = SNAPSPTH16), lwd = 0) +
  my_theme() +
  ggtitle("County-Level SNAP-authorized stores in the US, 2016") +
  scale_fill_gradientn(name = "SNAP-authorized stores/1000 population", colours = myPalette(100))
```

```{r, eval=TRUE}
#Create new dataframe with variables of interest
SNAP2016PA <- Stores %>%
  select(FIPS, State, SNAPSPTH16) %>%
  filter(State=="PA")
SNAP2016PA$GEO_ID <- paste0("0500000US", SNAP2016PA$FIPS)
SNAP2016PAmap <- inner_join(counties, SNAP2016PA, by="GEO_ID")

ggplot() +
  geom_sf(data = SNAP2016PAmap) + 
  geom_sf(data = SNAP2016PAmap, aes(fill = SNAPSPTH16), lwd = 0) +
  my_theme() +
  ggtitle("County-Level SNAP-authorized stores in Pennsylvania, 2016") +
  scale_fill_gradientn(name = "SNAP-authorized stores/1000 population", colours = myPalette(100))
```
Kept the dataframe but changed to interactive map. 

# Use a fixed color scale to more easily compare percents between maps 
prev_min <- min(c(counties2$age.adjusted.percent.2004, counties2$age.adjusted.percent.2014), na.rm = TRUE)
prev_max <- max(c(counties2$age.adjusted.percent.2004, counties2$age.adjusted.percent.2014), na.rm = TRUE)
