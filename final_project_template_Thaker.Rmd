---
title: "Regional anesthesia operations - BMIN503/EPID600 Project Template"
author: "Samir Thaker"
output: 
  html_document:
    toc: false 
    depth: 3 
    theme: paper 
    highlight: tango
---
```{r set-options, echo=FALSE, cache=FALSE}
options(width = 400)
```  
***
Use this template to complete your project throughout the course. Your Final Project presentation in class will be based on the contents of this document. Replace the title/name and text below with your own, but keep the headers.

### Overview
Use of regional anesthesia is expanding at PennMedicine but there have been few analyses quantifying the nature and extent off this growth. This project aims to clarify trends in regional anesthesia use at the University of Pennsylvania Health System from 2016 - 2019.


### Introduction 
Regional anesthesia refers to the use techniques to selectively anesthetize portions of the body to facilitate surgical intervention - either in place of or as an adjunct to more common approaches such as general anesthesia. Anecdotally, we believe the use of regional anesthesia at the University of Pennsylvania Health System has expanded in recent years but there has not been a thorough analysis of the extent of this growth. This project will examine trends in regional anesthesia use during the period 2016 - 2019, including overall volume, associated surgical procedures, types of staff performing regional anesthetics, and types of regional nerve blocks used. The results of this analysis may help inform future workforce planning and quality improvement efforts across the institution.

Assessing the growth of regional anesthesia is an interdisciplinary endeavor in multiple ways. Defining the problem requires an understanding of anesthetic and surgical procedures as well as hospital operations and workforce assignments. Gathering the requisite data touches on database design and project management. Performing the analysis itself will involve data cleaning, abstraction from structured clinical notes, and visualization. Basic statistical tests may also be used to determine the potential significance of any trends uncovered. In speaking with faculty domain experts, I was able to better define the scope of the planned analysis (for example, concentrating on an assesment of the clinical work performed in this project while leaving patient-specific data for a potential follow-on evaluation). I also learned about potential limitations in the underlying data (e.g., key information about regional nerve blocks is input by clinicians via structured forms but these are converted to text notes and the data will likely require processing these structured text snippets to re-extract the relevant variables). 


### Methods
We retreived patient-level data on all peripheral nerve blocks (PNBs) performed at two core PennMedicine clinical sites (Penn Presbyterian Medical Center and the Hospital of the University of Pennsylvania) during the period July 2016 to July 2019. Included in this data were details on the type of nerve block, staff involved, and associated surgical procedure. We also obtained data to match staff with their role (resident / attending / etc.) and clinical service (Orthopedics / vascular surgery / etc.) to allow for grouping by key workforce characteristics. 


```{r global options, echo = TRUE}
library(dplyr)
library(tidyverse)
library(ggplot2)
```


```{r}
# Import PNB data

# Import table to map staff name to clinical role (resident/attending)

# Import table to map attending surgeon to clinical department

# Reformat date, create new column for "day of week"

# Process PNB text note to extract key information: performing staff, supervising staff, location, block type (including approach or NA), single vs. continuous, gooal post-op analgesia vs. primary anesthetic

# Map staff names to clinical role, create new column

# Map attending surgeon to clinical department, create new column

```

### Results
In progress
