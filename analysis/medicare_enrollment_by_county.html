<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>medicare_enrollment_by_county</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="medicare_enrollment_by_county_files/libs/clipboard/clipboard.min.js"></script>
<script src="medicare_enrollment_by_county_files/libs/quarto-html/quarto.js"></script>
<script src="medicare_enrollment_by_county_files/libs/quarto-html/popper.min.js"></script>
<script src="medicare_enrollment_by_county_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="medicare_enrollment_by_county_files/libs/quarto-html/anchor.min.js"></script>
<link href="medicare_enrollment_by_county_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="medicare_enrollment_by_county_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="medicare_enrollment_by_county_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="medicare_enrollment_by_county_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="medicare_enrollment_by_county_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">medicare_enrollment_by_county</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="merge-aco-and-medicare-enrollment-data" class="level2">
<h2 class="anchored" data-anchor-id="merge-aco-and-medicare-enrollment-data">Merge ACO and Medicare Enrollment Data</h2>
<section id="data-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="data-assumptions">Data Assumptions</h3>
<ul>
<li>If there &lt;10 benes of ACO enrollment in a county, assume the enrollment is zero.</li>
<li></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at C:/Users/drobe/Code/BMIN503_Final_Project</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>aco_enroll <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"interim"</span>, <span class="st">"aco_enrollment.csv"</span>), </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">delim =</span> <span class="st">"|"</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 118561 Columns: 13</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Column specification ────────────────────────────────────────────────────────
Delimiter: "|"
chr (4): ACO_ID, State_Name, County_Name, source_file
dbl (9): Year, State_ID, County_ID, AB_Psn_Yrs_ESRD, AB_Psn_Yrs_DIS, AB_Psn_...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>med_enroll <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"interim"</span>, <span class="st">"medicare_enrollment.csv"</span>), </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">delim =</span> <span class="st">"|"</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 16378 Columns: 23
── Column specification ────────────────────────────────────────────────────────
Delimiter: "|"
chr  (7): MONTH, BENE_GEO_LVL, BENE_STATE_ABRVTN, BENE_STATE_DESC, BENE_COUN...
dbl (16): YEAR, TOT_BENES, ORGNL_MDCR_BENES, MA_AND_OTH_BENES, AGED_TOT_BENE...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>aco_enroll<span class="sc">$</span>StateCounty <span class="ot">&lt;-</span> <span class="fu">paste</span>(aco_enroll<span class="sc">$</span>County_Name, <span class="st">'|'</span>, aco_enroll<span class="sc">$</span>State_Name)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>med_enroll<span class="sc">$</span>StateCounty <span class="ot">&lt;-</span> <span class="fu">paste</span>(med_enroll<span class="sc">$</span>BENE_COUNTY_DESC, <span class="st">'|'</span>, med_enroll<span class="sc">$</span>BENE_STATE_DESC)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>med_enroll <span class="ot">&lt;-</span> <span class="fu">rename</span>(med_enroll, <span class="at">Year =</span> YEAR)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>aco_counties <span class="ot">&lt;-</span> <span class="fu">unique</span>(aco_enroll<span class="sc">$</span>StateCounty)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>med_counties <span class="ot">&lt;-</span> <span class="fu">unique</span>(med_enroll<span class="sc">$</span>StateCounty)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">union</span>(med_counties, aco_counties))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3294</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">intersect</span>(med_counties, aco_counties))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3149</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">setdiff</span>(med_counties, aco_counties))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 129</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>diff <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(med_counties, aco_counties)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>aco_diff <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(aco_counties, med_counties)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(diff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 129</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="fu">filter</span>(med_enroll, med_enroll<span class="sc">$</span>StateCounty <span class="sc">%in%</span> diff), <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"TOT_BENES"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(TOT_BENES, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
   Year `sum(TOT_BENES, na.rm = TRUE)`
  &lt;dbl&gt;                          &lt;dbl&gt;
1  2017                         149448
2  2018                         152580
3  2019                         157092
4  2020                         158443
5  2021                         160617</code></pre>
</div>
</div>
<p>Some data cleaning required to merge counties. Overall, pretty great.</p>
<p>About 150k per year which appear in all medicare file, but not ACO file. No ACO penetration in those areas…</p>
<p>Due to difference in how names are represented… LaSalle in one file, La Salle in another. Can fix this mapping up front.</p>
<p>In VA: Colonial Heights Cit Colonial Heights City</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="fu">filter</span>(med_enroll, med_enroll<span class="sc">$</span>StateCounty <span class="sc">%in%</span> diff), <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"TOT_BENES"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(TOT_BENES, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
   Year `sum(TOT_BENES, na.rm = TRUE)`
  &lt;dbl&gt;                          &lt;dbl&gt;
1  2017                         149448
2  2018                         152580
3  2019                         157092
4  2020                         158443
5  2021                         160617</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>med_enroll.diff <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="fu">filter</span>(med_enroll, med_enroll<span class="sc">$</span>StateCounty <span class="sc">%in%</span> diff), <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"TOT_BENES"</span>, <span class="st">"StateCounty"</span>))</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>med_enroll.diff[<span class="fu">order</span>(<span class="sc">-</span>med_enroll.diff<span class="sc">$</span>TOT_BENES), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 633 × 3
    Year TOT_BENES StateCounty       
   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;             
 1  2021     24635 LaSalle | Illinois
 2  2020     24400 LaSalle | Illinois
 3  2019     24110 LaSalle | Illinois
 4  2021     24029 LaPorte | Indiana 
 5  2020     23767 LaPorte | Indiana 
 6  2018     23728 LaSalle | Illinois
 7  2017     23390 LaSalle | Illinois
 8  2019     23326 LaPorte | Indiana 
 9  2018     22688 LaPorte | Indiana 
10  2017     22093 LaPorte | Indiana 
# … with 623 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="fu">filter</span>(aco_enroll, aco_enroll<span class="sc">$</span>StateCounty <span class="sc">%in%</span> aco_diff), <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Tot_AB_Psn_Yrs"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(Tot_AB_Psn_Yrs, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
   Year `sum(Tot_AB_Psn_Yrs, na.rm = TRUE)`
  &lt;dbl&gt;                               &lt;dbl&gt;
1  2014                               5049.
2  2015                               9513 
3  2016                              13922.
4  2017                              18524.
5  2018                              25830.
6  2019                              33415.
7  2020                              29484.
8  2021                              26373.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>aco_enroll.diff <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="fu">filter</span>(aco_enroll, aco_enroll<span class="sc">$</span>StateCounty <span class="sc">%in%</span> aco_diff), <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Tot_AB_Psn_Yrs"</span>, <span class="st">"StateCounty"</span>))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>aco_enroll.diff[<span class="fu">order</span>(<span class="sc">-</span>aco_enroll.diff<span class="sc">$</span>Tot_AB_Psn_Yrs), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 416 × 3
    Year Tot_AB_Psn_Yrs StateCounty        
   &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;              
 1  2020          5630. La Salle | Illinois
 2  2019          5578. La Salle | Illinois
 3  2018          5307. La Salle | Illinois
 4  2017          5008. La Salle | Illinois
 5  2021          4233. La Salle | Illinois
 6  2019          3626. La Porte | Indiana 
 7  2015          3560. La Porte | Indiana 
 8  2021          3498. La Porte | Indiana 
 9  2020          3420. La Porte | Indiana 
10  2018          3228. La Porte | Indiana 
# … with 406 more rows</code></pre>
</div>
</div>
<p>Group ACO data to county level</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>aco_enroll[<span class="fu">is.na</span>(aco_enroll<span class="sc">$</span>Tot_AB_Psn_Yrs), <span class="st">"Tot_AB_Psn_Yrs"</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>aco_by_county <span class="ot">&lt;-</span> aco_enroll <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, StateCounty) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">ACOBenePsnYrs =</span> <span class="fu">sum</span>(Tot_AB_Psn_Yrs))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<p>Merging the data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>merged <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  med_enroll,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  aco_by_county,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by=</span><span class="fu">c</span>(<span class="st">"StateCounty"</span>, <span class="st">"Year"</span>),</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>merged <span class="ot">&lt;-</span> <span class="fu">rename</span>(</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  merged,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">AllMedBenePsnYrs =</span> TOT_BENES,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">OrigMedBenePsnYrs =</span> ORGNL_MDCR_BENES,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">MA_BenePsnYrs =</span> MA_AND_OTH_BENES,</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>merged.subset <span class="ot">&lt;-</span> <span class="fu">select</span>(</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  merged,</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"StateCounty"</span>, <span class="st">"Year"</span>, <span class="st">"AllMedBenePsnYrs"</span>, <span class="st">"OrigMedBenePsnYrs"</span>, <span class="st">"MA_BenePsnYrs"</span>, <span class="st">"ACOBenePsnYrs"</span>)</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co"># filter obs where total medicare enroll is unknown</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">count</span>(merged.subset))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      n
1 16378</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>merged.subset <span class="ot">&lt;-</span> <span class="fu">filter</span>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  merged.subset, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(merged.subset<span class="sc">$</span>AllMedBenePsnYrs)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>merged.subset[<span class="fu">is.na</span>(merged.subset<span class="sc">$</span>ACOBenePsnYrs), <span class="st">"ACOBenePsnYrs"</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Add new columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>merged.subset <span class="ot">&lt;-</span> merged.subset <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ACOPenetration =</span> ACOBenePsnYrs <span class="sc">/</span> AllMedBenePsnYrs) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MAPenetration =</span> MA_BenePsnYrs <span class="sc">/</span> AllMedBenePsnYrs) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">VBCPenetration =</span> MAPenetration <span class="sc">+</span> ACOPenetration) <span class="sc">%&gt;%</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">LogAllMedBenePsnYrs =</span> <span class="fu">log</span>(AllMedBenePsnYrs))</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(merged.subset, Year <span class="sc">==</span> <span class="dv">2019</span>), <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>VBCPenetration, <span class="at">y=</span>LogAllMedBenePsnYrs)) <span class="sc">+</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 55 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="medicare_enrollment_by_county_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Observations: - Maybe a relationship between Bene count and VBC penetration. This could result from removal of small counties… - Why are there pene figures &gt; 1?</p>
<p>Looks like there was an issue in calculating in 2019? All issues occur in 2019, affects 63 records. Need to verify that assignables really are drawn from the entire medicare population.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(merged.subset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      n
1 16108</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>gt.zero <span class="ot">&lt;-</span> <span class="fu">filter</span>(merged.subset, VBCPenetration <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(gt.zero)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   n
1 63</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>gt.zero</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    StateCounty Year AllMedBenePsnYrs OrigMedBenePsnYrs
1          Androscoggin | Maine 2019            24800             13802
2                Ashland | Ohio 2019            11388              6833
3          Attala | Mississippi 2019             4222              3217
4       Barbour | West Virginia 2019             4064              2873
5      Brookings | South Dakota 2019             4850              3860
6          Brown | South Dakota 2019             7467              6572
7              Citrus | Florida 2019            58818             34782
8                   Clay | Iowa 2019             3929              3787
9      Codington | South Dakota 2019             5681              3449
10      Covington | Mississippi 2019             4183              3158
11            Custer | Nebraska 2019             2601              2553
12             Dickinson | Iowa 2019             5086              4766
13          Edmonson | Kentucky 2019             2955              1973
14                 Emmet | Iowa 2019             2299              2196
15          Fillmore | Nebraska 2019             1471              1445
16        Forrest | Mississippi 2019            13393             10031
17                Gove | Kansas 2019              670               650
18         Grant | South Dakota 2019             1891              1047
19           Gratiot | Michigan 2019             8657              5632
20              Guernsey | Ohio 2019             9299              6428
21          Gunnison | Colorado 2019             2442              2123
22          Hand | South Dakota 2019              843               764
23          Hinsdale | Colorado 2019              242               216
24              Hockley | Texas 2019             3909              2463
25        Hughes | South Dakota 2019             3424              3134
26    Hutchinson | South Dakota 2019             1818              1356
27          Hyde | South Dakota 2019              334               315
28         Jones | South Dakota 2019              233               205
29                 Knox | Maine 2019            11759              7606
30              Knox | Nebraska 2019             2240              1976
31              Lincoln | Maine 2019            11018              6656
32          Lincoln | Minnesota 2019             1527              1095
33                Llano | Texas 2019             7248              4995
34             Logan | Kentucky 2019             6133              4463
35                 Lucas | Ohio 2019            85541             45351
36             Lyon | Minnesota 2019             4750              3482
37            Marion | Kentucky 2019             4093              2964
38      Marshall | South Dakota 2019             1070               919
39         McCracken | Kentucky 2019            16223             11702
40            Moffat | Colorado 2019             2304              2068
41        Montgomery | Illinois 2019             6674              5573
42       Montour | Pennsylvania 2019             4302              2151
43         Moody | South Dakota 2019             1278              1021
44             Muskingum | Ohio 2019            20070             12690
45 New Hanover | North Carolina 2019            46134             34983
46               Osceola | Iowa 2019             1418              1334
47            Otsego | Michigan 2019             6378              4309
48               Oxford | Maine 2019            15647              9841
49     Pamlico | North Carolina 2019             4003              3342
50          Pickett | Tennessee 2019             1613              1226
51        Rio Blanco | Colorado 2019             1166               968
52               Rooks | Kansas 2019             1269              1214
53             San Saba | Texas 2019             1500              1052
54        Snyder | Pennsylvania 2019             8505              4744
55       Stanley | South Dakota 2019              654               591
56         Sully | South Dakota 2019              338               313
57         Union | Pennsylvania 2019             8384              5178
58                Waldo | Maine 2019            10833              7096
59         Washtenaw | Michigan 2019            59693             38970
60                 Wayne | Utah 2019              636               603
61        Webster | Mississippi 2019             2617              2460
62       Yankton | South Dakota 2019             4956              3871
63                 York | Maine 2019            50884             33055
   MA_BenePsnYrs ACOBenePsnYrs ACOPenetration MAPenetration VBCPenetration
1          10999      14965.01      0.6034278    0.44350806       1.046936
2           4555       7127.41      0.6258702    0.39998244       1.025853
3           1006       3884.00      0.9199432    0.23827570       1.158219
4           1191       2973.24      0.7316043    0.29306102       1.024665
5            990       4451.84      0.9179052    0.20412371       1.122029
6            895       6714.08      0.8991670    0.11986072       1.019028
7          24036      36232.65      0.6160130    0.40865041       1.024663
8            142       5187.59      1.3203334    0.03614151       1.356475
9           2231       3566.84      0.6278543    0.39271255       1.020567
10          1024       3275.75      0.7831102    0.24480038       1.027911
11            49       2584.75      0.9937524    0.01883891       1.012591
12           320       6111.00      1.2015336    0.06291781       1.264451
13           983       2010.68      0.6804332    0.33265651       1.013090
14           102       2844.92      1.2374598    0.04436712       1.281827
15            25       1893.83      1.2874439    0.01699524       1.304439
16          3362      10575.16      0.7896035    0.25102666       1.040630
17            20        718.58      1.0725075    0.02985075       1.102358
18           844       1104.66      0.5841671    0.44632470       1.030492
19          3024       5888.58      0.6802102    0.34931269       1.029523
20          2871       7609.83      0.8183493    0.30874288       1.127092
21           319       2189.50      0.8966011    0.13063063       1.027232
22            80        937.33      1.1118980    0.09489917       1.206797
23            27        243.25      1.0051653    0.11157025       1.116736
24          1446       2546.51      0.6514479    0.36991558       1.021364
25           289       3293.00      0.9617407    0.08440421       1.046145
26           462       1862.41      1.0244279    0.25412541       1.278553
27            19        408.67      1.2235629    0.05688623       1.280449
28            28        212.16      0.9105579    0.12017167       1.030730
29          4153       8491.75      0.7221490    0.35317629       1.075325
30           264       2301.90      1.0276339    0.11785714       1.145491
31          4362       6842.17      0.6209993    0.39589762       1.016897
32           432       1428.50      0.9354944    0.28290766       1.218402
33          2253       5049.07      0.6966156    0.31084437       1.007460
34          1670       4487.39      0.7316794    0.27229741       1.003977
35         40190      46176.83      0.5398210    0.46983318       1.009654
36          1268       3838.50      0.8081053    0.26694737       1.075053
37          1129       3485.40      0.8515514    0.27583679       1.127388
38           152        968.84      0.9054579    0.14205607       1.047514
39          4521      13336.42      0.8220687    0.27867842       1.100747
40           236       2182.67      0.9473394    0.10243056       1.049770
41          1101       5923.83      0.8875981    0.16496853       1.052567
42          2151       2204.66      0.5124733    0.50000000       1.012473
43           257       1350.84      1.0569953    0.20109546       1.258091
44          7380      15381.42      0.7663886    0.36771300       1.134102
45         11151      35473.50      0.7689231    0.24170893       1.010632
46            84       1674.41      1.1808251    0.05923836       1.240063
47          2069       4725.33      0.7408796    0.32439636       1.065276
48          5806      11847.18      0.7571534    0.37106155       1.128215
49           661       3534.67      0.8830052    0.16512616       1.048131
50           387       1372.84      0.8511097    0.23992560       1.091035
51           198       1278.50      1.0964837    0.16981132       1.266295
52            54       1413.17      1.1136091    0.04255319       1.156162
53           449       1099.42      0.7329467    0.29933333       1.032280
54          3761       5537.09      0.6510394    0.44221046       1.093250
55            64        664.34      1.0158104    0.09785933       1.113670
56            26        379.00      1.1213018    0.07692308       1.198225
57          3206       6615.16      0.7890219    0.38239504       1.171417
58          3737       7814.93      0.7214004    0.34496446       1.066365
59         20723      41916.41      0.7021998    0.34715963       1.049359
60            33        862.08      1.3554717    0.05188679       1.407358
61           157       2979.58      1.1385480    0.05999236       1.198540
62          1085       5191.25      1.0474677    0.21892655       1.266394
63         17829      33680.68      0.6619110    0.35038519       1.012296
   LogAllMedBenePsnYrs
1            10.118599
2             9.340315
3             8.348064
4             8.309923
5             8.486734
6             8.918249
7            10.982203
8             8.276140
9             8.644883
10            8.338784
11            7.863651
12            8.534247
13            7.991254
14            7.740230
15            7.293698
16            9.502487
17            6.507278
18            7.544861
19            9.066124
20            9.137662
21            7.800573
22            6.736967
23            5.488938
24            8.271037
25            8.138565
26            7.505492
27            5.811141
28            5.451038
29            9.372374
30            7.714231
31            9.307286
32            7.331060
33            8.888481
34            8.721439
35           11.356751
36            8.465900
37            8.317033
38            6.975414
39            9.694185
40            7.742402
41            8.805975
42            8.366835
43            7.153052
44            9.906981
45           10.739305
46            7.257003
47            8.760610
48            9.658034
49            8.294799
50            7.385851
51            7.061334
52            7.145984
53            7.313220
54            9.048410
55            6.483107
56            5.823046
57            9.034080
58            9.290352
59           10.996970
60            6.455199
61            7.869784
62            8.508354
63           10.837304</code></pre>
</div>
</div>
<p>Validate MA enrollment figure… 1-2% under <a href="https://www.kff.org/medicare/issue-brief/medicare-advantage-in-2022-enrollment-update-and-key-trends/#:~:text=In%202022%2C%20nearly%20half%20of,(19%25%20to%2048%25).">KFF Report</a>, but reasonable</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>merged.subset <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">ma_sum =</span> <span class="fu">sum</span>(MA_BenePsnYrs, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">med_sum =</span> <span class="fu">sum</span>(AllMedBenePsnYrs), </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">pene =</span> <span class="fu">sum</span>(MA_BenePsnYrs, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(AllMedBenePsnYrs, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
   Year   ma_sum  med_sum  pene
  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
1  2017 19784141 57977580 0.341
2  2018 21320702 59502786 0.358
3  2019 22933446 61012499 0.376
4  2020 25059209 62320991 0.402
5  2021 27531195 63364024 0.434</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>