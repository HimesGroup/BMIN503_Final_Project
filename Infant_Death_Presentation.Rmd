---
title: "Changing Nature of Death in Infancy in the United States"
author: "Kevin Dysart"
date: "12/1/2019"
output: slidy_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r loading packages, echo=FALSE, warning=FALSE, message=FALSE}
library("tidyverse")
library("urbnmapr")
library("lubridate")
library("survival")
library("survminer")
```

```{r reading in dataframes for slides, echo=FALSE, warning=FALSE, message=FALSE}
#Reading CDC Wonder Data Files
Wonder_File_Names <- list.files(path = "Linked_Birth_Death_Data/CDC_Wonder_All_Death_By_Year/", pattern = "*.txt")
Wonder_Files <- list.files(path = "Linked_Birth_Death_Data/CDC_Wonder_All_Death_By_Year/", pattern = "*.txt", full.names = T)
Wonder_Files_df <- lapply(Wonder_Files, read.delim)
names(Wonder_Files_df) <- Wonder_File_Names
#Reading Linked Birth and Death Data
Linked_Birth_Death_Names <- list.files(path = "Linked_Birth_Death_Data/Linked_Year_CSV_Zip/", pattern = "*.csv.zip")
Linked_Birth_Death_Files <- list.files(path = "Linked_Birth_Death_Data/Linked_Year_CSV_Zip/", pattern = "*.csv.zip", full.names = T)
Linked_Birth_Death_Files_df <- lapply(Linked_Birth_Death_Files, read_csv)
names(Linked_Birth_Death_Files_df) <- Linked_Birth_Death_Names
```

```{r removing Notes column, echo=FALSE, warning=FALSE, message=FALSE}
for (i in 1:length(Wonder_Files_df)) {
  Wonder_Files_df[[i]] <-  Wonder_Files_df[[i]] %>%
                    select(-Notes) %>%
                    slice(1:51)
}
```


## Introduction

- Infant mortality in the United States is a much discussed topic in population.
  - Infant mortality rates are often associated with the health of nations across the world.
- Much of the recent conversation in neonatal medicine is on the increasing survival amongst infants born less than 1,000g (ELBW).
  - Recent studies have shown small but significant increase in survival amongst the most smallest and most premature infants. 
    - This is largely the result of therapeutics interventions introduced over the last 20 years and more frequent applications to younger infants.
  - Little information is available on how trends in care practices have impacted death in infancy.
  - Specifically among infants born ELBW

## Hypothesis {.bigger}

- Among infants born ELBW there will be a temporal trend towrds increasing time before death among infants born less than 1,000g. 

## Infant Mortality Rate 1995

```{r IMR 1995, echo = FALSE, warning=FALSE}
All_Infant_Death_1995_By_State <- Wonder_Files_df[[1]]
All_Infant_Death_1995_By_State <- rename(All_Infant_Death_1995_By_State, state_name = State)
All_Infant_Death_1995_By_State <- rename(All_Infant_Death_1995_By_State, death_rate = "Death.Rate")

state_data_infant_death_1995 <- left_join(All_Infant_Death_1995_By_State, states, 
                                          by = "state_name")
state_data_infant_death_1995 %>%
  ggplot(aes(long, lat, group = group, fill = death_rate)) +
  ggtitle("Infant Death Rate in the US 1995") +
  geom_polygon(color = NA) +
  coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
  labs(fill = "Infant Death Rate")
```

## Infant Mortality Rate 2007

```{r IMR 2007, echo = FALSE, warning=FALSE}
All_Infant_Death_2007_By_State <- Wonder_Files_df[[13]]
All_Infant_Death_2007_By_State <- rename(All_Infant_Death_2007_By_State, state_name = State)
All_Infant_Death_2007_By_State <- rename(All_Infant_Death_2007_By_State, death_rate = "Death.Rate")

state_data_infant_death_2007 <- left_join(All_Infant_Death_2007_By_State, states, 
                                          by = "state_name")
state_data_infant_death_2007 %>%
  ggplot(aes(long, lat, group = group, fill = death_rate)) +
  ggtitle("Infant Death Rate in the US 2007") +
  geom_polygon(color = NA) +
  coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
  labs(fill = "Infant Death Rate")
```

## Infant Mortality Rate 2017

```{r IMR 2017, echo = FALSE, warning=FALSE}
All_Infant_Death_2017_By_State <- Wonder_Files_df[[23]]
All_Infant_Death_2017_By_State <- rename(All_Infant_Death_2017_By_State, state_name = State)
All_Infant_Death_2017_By_State <- rename(All_Infant_Death_2017_By_State, death_rate = "Death.Rate")

state_data_infant_death_2017 <- left_join(All_Infant_Death_2017_By_State, states, 
                                          by = "state_name")
state_data_infant_death_2017 %>%
  ggplot(aes(long, lat, group = group, fill = death_rate)) +
  ggtitle("Infant Death Rate in the US 2017") +
  geom_polygon(color = NA) +
  coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
  labs(fill = "Infant Death Rate")
```

