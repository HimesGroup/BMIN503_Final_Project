---
title: "EPID 600 Project Template"
author: "Gary Weissman"
output: 
  html_document:
    toc: false 
    depth: 3 
    theme: paper 
    highlight: tango
---
```{r set-options, echo=FALSE, cache=FALSE}
options(width = 400)
```  
***

### Overview

I am interested in exploring in a pilot feasibility study, the relative utility of machine learning vs "traditional" generalized linear models, and of structured vs. unstructured data in predicting clinical outcomes among patients admitted to the hospital with critical illness. I will explore this question using the [MIMIC-III dataset](https://mimic.physionet.org/).

I plan to meet with the following faculty members to explore this problem:

* Scott Halpern, MD, PhD, Associate Professor, Pulmonary, Allergy, and Critical Care Division
* Lyle Ungar, PhD, Professor, Department of Computer and Information Science
* Rebecca Hubbard, PhD, Associate Professor, Department of Biostatistics and Epidemiology


### Introduction 

Admission to the intensive care unit (ICU) is costly, places strain on busy health systems, and may not be matched with patient preferences. Predictive models of newly hospitalized patients could provide early identification of patients at risk of death or a prolonged ICU stay. Such a model could prompt early discussions of limitations on life-sustaining therapy, or be used to efficiently allocate hospital resources. Prior work on such predictive models has relied on structured data from laboratory results, vital signs, demographic, and adminstrative sources.

Our goal is to incorporate unstructured text data from clinical notes into these predictive models and assess the feasibility and utility of using such data sources. This investigation requires collaboration between practicing clinicians, hospital policymakers, statisticians, and experts in machine learning and natural language processing. From meetings with various faculty members I have learned about: 1) approaches for cross-validation of discrete time-series predictive models using longitudinal with repeated observations, and 2) the role of differential language analysis, including open- and closed-vocabulary methods to extract meanginful features from unstructured text data.


### Methods

<!--
In the first paragraph, describe the data used and general methodological approach. Subsequently, incorporate full R code necessary to retrieve and clean data, and perform analysis. Be sure to include a description of code so that others (including your future self) can understand what you are doing and why. 
-->

We analyzed the MIMIC-III dataset, which contains all hospitalizations with an ICU stay at Beth Israel Deaconess Medical Center, Boston, MA, from June 2001 through October 2012. Admissions with patient age ≥ 18 years, hospital length of stay (LOS) ≥ 48 hours, and those with any clinical notes in the first 48 hours were included. We built a set of “base” models using age, gender, Elixhauser score, and any mechanical ventilation, cardiac arrest, or ICU transfer within the first 48 hours as covariates. Models predicted a binary composite outcome of in-hospital death or ICU LOS ≥ 7 days. A second round of “plus” models was built using the same “base” variables, plus a set of 221 text features derived using open- and closed-vocabulary methods with natural language processing (NLP) techniques from the first 48 hours of clinical notes. Predictive models were built using the following: LR, LR with restricted cubic splines, bagged trees, random forest (RF), gradient boosted machines (GBM), k-nearest neighbors, support vector machines, and neural networks (NN). Model accuracy was evaluated via 10-fold cross-validation and a 75/25 split into training and testing samples. 

### Results
<!--
Describe your results and include relevant tables, plots, and code/comments used to obtain them. End with a brief conclusion of your findings related to the question you set out to address. You can include references if you'd like, but this is not required.
-->

We analyzed 22,303 admissions with median hospital LOS 6.8 (days; IQR 4.5-11.3). The median ICU LOS was 2.3 (days; IQR 1.3-4.6); 1,903 (8.5%) patients died in the hospital; and 4,636 (21.9%) either died or had ICU LOS ≥ 7 days. Among base models, LR performance was equivalent to NN, RF, and GBM (p > 0.280 for all three comparisons by DeLong test). Among the plus models, all were superior to their base counterparts, and RF and GBM outperformed LR (p < 0.001 for both comparisons). The most predictive text terms were “vent” and “vent changes”. Receiver operating characteristic curves for all models are found in Figure 1. 

![Figure 1: Receiver operating characteristic curves of "base" models (left) and "plus" models (right)](combo_image.jpg)